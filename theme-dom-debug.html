<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Theme DOM Debug</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Import app styles to replicate the issue */
    @import url('http://localhost:5174/src/App.css');
    
    .debug-section {
      margin: 20px 0;
      padding: 20px;
      border: 2px solid #333;
      border-radius: 8px;
      background: white;
    }

    .theme-info {
      background: #f0f0f0;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    /* Test some theme-specific styles */
    [data-theme='material-light'] .material-test {
      background-color: var(--md-primary-main, red);
      color: var(--md-on-primary, white);
      padding: 10px;
      border-radius: 8px;
    }

    [data-theme='fluent-light'] .fluent-test {
      background-color: var(--fluent-brand-primary, blue);
      color: white;
      padding: 10px;
      border-radius: 4px;
    }

    [data-theme='neo-brutalism-light'] .neo-test {
      background-color: var(--brutalist-lime, green);
      color: black;
      padding: 10px;
      border: 2px solid black;
      box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
    }
  </style>
</head>
<body class="bg-gray-100 p-8">
  <h1 class="text-3xl font-bold mb-8">üîç Theme DOM Debug</h1>

  <div class="debug-section">
    <h2 class="text-xl font-bold mb-4">Current DOM State</h2>
    <div class="theme-info">
      <strong>HTML data-theme:</strong> <span id="html-theme">Loading...</span>
    </div>
    <div class="theme-info">
      <strong>Body data-theme:</strong> <span id="body-theme">Loading...</span>
    </div>
    <div class="theme-info">
      <strong>Root element data-theme:</strong> <span id="root-theme">Loading...</span>
    </div>
  </div>

  <div class="debug-section">
    <h2 class="text-xl font-bold mb-4">Theme Switching Test</h2>
    <button onclick="setTheme('material-light')" class="bg-purple-500 text-white px-4 py-2 rounded mr-2">
      Set Material Light
    </button>
    <button onclick="setTheme('fluent-light')" class="bg-blue-500 text-white px-4 py-2 rounded mr-2">
      Set Fluent Light
    </button>
    <button onclick="setTheme('neo-brutalism-light')" class="bg-green-500 text-white px-4 py-2 rounded">
      Set Neo-Brutalism Light
    </button>
  </div>

  <div class="debug-section">
    <h2 class="text-xl font-bold mb-4">Theme-Specific Elements Test</h2>
    
    <div class="material-test mb-4">
      Material Design Test - Should have purple background when material-light is active
    </div>
    
    <div class="fluent-test mb-4">
      Fluent Design Test - Should have blue background when fluent-light is active  
    </div>
    
    <div class="neo-test mb-4">
      Neo-Brutalism Test - Should have green background and black border when neo-brutalism-light is active
    </div>
  </div>

  <div class="debug-section">
    <h2 class="text-xl font-bold mb-4">CSS Variables Values</h2>
    <div id="css-variables"></div>
  </div>

  <div class="debug-section">
    <h2 class="text-xl font-bold mb-4">Badge Test with Current Theme</h2>
    <div class="relative inline-block">
      <button class="p-3 bg-gray-200 rounded border">
        üîî Button
      </button>
      <span id="test-badge" class="absolute -top-2 -right-2 px-2 py-1 text-xs font-bold rounded-full"
            style="background-color: red; color: white; min-width: 20px; height: 20px; display: flex; align-items: center; justify-content: center;">
        3
      </span>
    </div>
  </div>

  <script>
    function updateThemeInfo() {
      const html = document.documentElement;
      const body = document.body;
      const root = document.getElementById('root');
      
      document.getElementById('html-theme').textContent = html.getAttribute('data-theme') || 'NONE';
      document.getElementById('body-theme').textContent = body.getAttribute('data-theme') || 'NONE';
      document.getElementById('root-theme').textContent = root ? (root.getAttribute('data-theme') || 'NONE') : 'NO ROOT ELEMENT';
      
      updateCSSVariables();
      updateBadgeColor();
    }

    function updateCSSVariables() {
      const rootStyle = getComputedStyle(document.documentElement);
      const variables = [
        '--md-primary-main',
        '--md-error-main',
        '--fluent-brand-primary', 
        '--fluent-semantic-danger',
        '--brutalist-red',
        '--brutalist-green',
        '--destructive',
        '--accent'
      ];
      
      let html = '<div class="grid grid-cols-2 gap-2">';
      variables.forEach(varName => {
        const value = rootStyle.getPropertyValue(varName);
        const hasValue = value && value.trim() !== '';
        html += `
          <div class="flex justify-between p-2 border-b border-gray-300">
            <code class="text-sm">${varName}</code>
            <span class="text-sm ${hasValue ? 'text-green-600' : 'text-red-600'}">
              ${hasValue ? value.trim() : 'NOT DEFINED'}
            </span>
          </div>
        `;
      });
      html += '</div>';
      
      document.getElementById('css-variables').innerHTML = html;
    }

    function updateBadgeColor() {
      const badge = document.getElementById('test-badge');
      const currentTheme = document.documentElement.getAttribute('data-theme');
      
      if (currentTheme === 'material-light') {
        badge.style.backgroundColor = '#B00020';
        badge.style.color = '#FFFFFF';
        badge.style.borderRadius = '50%';
      } else if (currentTheme === 'fluent-light') {
        badge.style.backgroundColor = '#D13438';
        badge.style.color = '#FFFFFF';
        badge.style.borderRadius = '50%';
      } else if (currentTheme === 'neo-brutalism-light') {
        badge.style.backgroundColor = '#ef4444';
        badge.style.color = '#000000';
        badge.style.borderRadius = '0px';
        badge.style.border = '2px solid #000000';
      } else {
        badge.style.backgroundColor = 'red';
        badge.style.color = 'white';
        badge.style.borderRadius = '50%';
      }
    }

    function setTheme(themeName) {
      // Try multiple approaches to set the theme
      document.documentElement.setAttribute('data-theme', themeName);
      document.body.setAttribute('data-theme', themeName);
      
      // Also try to set it via localStorage (next-themes approach)
      localStorage.setItem('theme', themeName);
      
      console.log('Theme set to:', themeName);
      
      // Update the display
      setTimeout(updateThemeInfo, 100);
    }

    // Initial update
    setTimeout(updateThemeInfo, 500);
    
    // Watch for theme changes
    const observer = new MutationObserver(updateThemeInfo);
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ['data-theme']
    });
  </script>
</body>
</html>
