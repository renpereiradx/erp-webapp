@use '../abstracts' as *;

// Local variables for strict spec matching
$spec-bg-input: #f0f2f4;
$spec-text-secondary: #617589;
$spec-border-radius-xl: 0.75rem; // 12px (rounded-xl)
$spec-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);

.my-profile {
  display: flex;
  flex-direction: column;
  gap: $spacing-24;
  padding: $spacing-24;
  max-width: 1440px;
  margin: 0 auto;

  // Header section
  &__header {
    display: flex;
    flex-direction: column;
    gap: 4px; // gap-1
    padding: 0 $spacing-8;
  }

  &__title {
    @include heading-1;
    font-size: 30px; // text-3xl
    font-weight: 900; // font-black
    letter-spacing: -0.025em; // tracking-tight
    line-height: 1.2;
    margin: 0;
    
    @include themify {
      color: themed('text-primary');
    }
  }

  &__subtitle {
    @include body;
    margin: 0;
    color: $spec-text-secondary;
    
    @include themify {
      color: if(themed('text-secondary') == $neutral-gray-50, themed('text-secondary'), $spec-text-secondary);
    }
  }

  // Cards
  // Using system Card component, keeping class for potential layout specifics or legacy support if needed
  // Visual styles (border, shadow, bg) are now handled by component

  // Profile Card Specifics
  &__profile-card-content {
      display: flex;
      flex-direction: column;
      gap: $spacing-24;

      @include respond-to(md) {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
      }
  }

  &__user-info {
    display: flex;
    align-items: center;
    gap: $spacing-24;
  }

  &__avatar-wrapper {
    position: relative;
    width: 112px; // size-28
    height: 112px;
    
    &:hover .my-profile__avatar-edit {
        transform: scale(1.1);
    }
  }

  // Avatar image styles handled by Avatar component
  // Keeping specific overrides if component isn't enough, but it should be.
  // Removing __avatar-image and __avatar-placeholder as they are replaced by Avatar component parts

  &__avatar-edit {
      position: absolute;
      bottom: -8px;
      right: -8px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.2s;
      
      @include themify {
          background-color: themed('surface-card');
          border: 1px solid themed('border-default');
          box-shadow: themed('shadow-4');
          color: themed('text-primary');
      }

      .material-symbols-outlined {
          font-size: 18px;
      }
  }

  &__details {
    display: flex;
    flex-direction: column;
  }

  &__name {
    @include heading-3; // text-2xl font-bold
    margin: 0;
    
    @include themify {
      color: themed('text-primary');
    }
  }

  &__email {
    @include body-small; // text-sm
    margin: 0;
    color: $spec-text-secondary;

    @include themify {
       color: if(themed('text-secondary') == $neutral-gray-50, themed('text-secondary'), $spec-text-secondary);
    }
  }

  &__badges {
    display: flex;
    gap: $spacing-8;
    margin-top: $spacing-8;
  }

  // __badge styles removed - using system Badge component

  // Grid Layout
  &__grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: $spacing-24;

    @include respond-to(xl) {
      grid-template-columns: 1fr 1fr; // xl:grid-cols-2
    }
  }

  // Forms
  &__form {
      display: flex;
      flex-direction: column;
      gap: $spacing-16; // space-y-4
  }

  &__form-row-2 {
      display: grid;
      grid-template-columns: 1fr;
      gap: $spacing-16;

      @include respond-to(md) {
          grid-template-columns: 1fr 1fr;
      }
  }

  &__form-group {
      display: flex;
      flex-direction: column;
      gap: 6px; // gap-1.5
  }

  &__label {
      @include caption; // text-xs
      font-weight: $font-weight-bold;
      text-transform: uppercase;
      letter-spacing: -0.025em; // tracking-tight
      color: $spec-text-secondary;
      
      @include themify {
        color: if(themed('text-secondary') == $neutral-gray-50, themed('text-secondary'), $spec-text-secondary);
      }
  }

  // Password Strength
  &__password-strength {
      display: flex;
      gap: 4px; // gap-1
      margin-top: $spacing-8;
  }

  &__strength-bar {
      flex: 1;
      height: 4px; // h-1
      border-radius: $border-radius-pill;
      background-color: #e5e7eb; // bg-gray-200

      &--filled {
          background-color: $success-60; // bg-success
      }
  }

  &__strength-text {
      font-size: 10px;
      font-weight: $font-weight-bold;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-top: 4px;
      color: $success-60;
  }


  &__form-actions {
      margin-top: $spacing-8;
  }

  // 2FA Card
  &__2fa-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-16;
    margin-top: $spacing-16;
    border-radius: $border-radius-large; // rounded-lg
    
    @include themify {
      background-color: rgba(themed('action-primary'), 0.05); // bg-primary/5
    }
  }

  &__2fa-content {
      display: flex;
      align-items: center;
      gap: $spacing-12; // gap-3

      .material-symbols-outlined {
          @include themify {
              color: themed('action-primary');
          }
      }
  }

  &__2fa-title {
      font-size: 14px;
      font-weight: $font-weight-bold;
      margin: 0;
      
      @include themify {
          color: themed('text-primary');
      }
  }

  &__2fa-subtitle {
      font-size: 12px;
      margin: 0;
      color: $spec-text-secondary;
  }

  &__link-button {
      background: none;
      border: none;
      font-size: 12px; // text-xs
      font-weight: $font-weight-bold;
      cursor: pointer;
      
      @include themify {
          color: themed('action-primary');
      }

      &:hover {
          text-decoration: underline;
      }
  }

  // Session Summary (New List Version)
  &__card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: $spacing-24;

      .my-profile__card-title {
          margin-bottom: 0;
      }
  }

  &__signout-all-btn {
      font-size: 12px; // text-xs
      font-weight: $font-weight-bold;
      color: $error-60; // text-red-500
      background: none;
      border: none;
      padding: 6px 12px;
      border-radius: $border-radius-large;
      cursor: pointer;
      transition: background-color 0.2s;

      &:hover {
          background-color: #fef2f2; // hover:bg-red-50
      }
  }

  &__sessions-list {
      display: flex;
      flex-direction: column;
      
      // Divide lines
      & > * + * {
          border-top: 1px solid #f3f4f6; // divide-gray-100
      }
  }

  &__session-item {
      padding: $spacing-16 0; // py-4
      display: flex;
      align-items: center;
      justify-content: space-between;
  }

  &__session-info-group {
      display: flex;
      align-items: center;
      gap: $spacing-16; // gap-4
  }

  &__session-icon {
      width: 40px; // size-10
      height: 40px;
      border-radius: 50%; // rounded-full
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: $neutral-gray-8; // bg-gray-100
      color: $spec-text-secondary; // text-[#617589]

      &--current {
          background-color: #dcfce7; // bg-green-100
          color: #16a34a; // text-green-600
      }
  }

  &__session-details-row {
      display: flex;
      align-items: center;
      gap: $spacing-8;
  }

  &__session-device {
      font-size: 14px; // text-sm
      font-weight: $font-weight-bold;
      
      @include themify {
          color: themed('text-primary');
      }
  }

  &__session-badge {
      background-color: #dcfce7; // bg-green-100
      color: #15803d; // text-green-700
      font-size: 10px; // text-[10px]
      font-weight: $font-weight-bold;
      padding: 2px 6px;
      border-radius: 4px;
      text-transform: uppercase;
  }

  &__session-location {
      font-size: 12px; // text-xs
      color: $spec-text-secondary; // text-[#617589]
      margin: 0;
  }

  &__session-close {
      background: none;
      border: none;
      cursor: pointer;
      color: $spec-text-secondary;
      transition: color 0.2s;

      &:hover {
          color: $error-60; // hover:text-red-500
      }
  }
}

