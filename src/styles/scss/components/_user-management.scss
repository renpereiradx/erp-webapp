// =============================================================================
// USER MANAGEMENT COMPONENT
// =============================================================================
// Specific styles for the User Management List page
// =============================================================================

@use '../abstracts' as *;

.user-management {
  // Page container
  min-height: 100vh;
  display: flex;
  font-family: $font-family-base;

  @include themify {
    background-color: themed('bg-secondary');
    color: themed('text-primary');
  }

  // Sidebar specific overrides


  // Main Content Area
  &__content {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
  }

  &__header-row {
    display: flex;
    height: 4.5rem; // Slightly taller for more breath
    align-items: center;
    justify-content: space-between;
    padding: 0 $spacing-32;
    position: sticky;
    top: 0;
    z-index: $z-index-sticky;

    @include themify {
      border-bottom: 1px solid themed('border-subtle');
      background-color: alpha-color(themed('surface-card'), 0.95);
    }
    backdrop-filter: blur(8px);
  }

  &__header-title {
    display: flex;
    align-items: center;
    gap: $spacing-16;
    
    h2 {
      @include text-style($font-size-600, $font-weight-bold);
      line-height: 1.25;
      @include themify {
        color: themed('text-primary');
      }
    }
  }

  &__header-actions {
    display: flex;
    align-items: center;
    gap: $spacing-16;
  }

  &__header-buttons {
    display: flex;
    gap: $spacing-8;

    .btn {
      border: 0 !important;
    }
  }

  &__search-bar {
    display: flex;
    align-items: center;
    gap: $spacing-12;
    padding: $spacing-8 $spacing-16;
    border-radius: $border-radius-large;
    border: 1px solid transparent;
    @include transition(all);

    @include themify {
      background-color: themed('bg-secondary');
    }

    &:focus-within {
      @include themify {
        background-color: themed('surface-card');
        border-color: themed('action-primary');
        box-shadow: 0 0 0 3px alpha-color(themed('action-primary'), 0.1);
      }
    }

    input {
      background: transparent;
      border: none;
      font-size: $font-size-200;
      width: 20rem; // wider per spec w-64 is approx 16rem, using 20 for more space
      padding: 0;
      outline: none;
      font-weight: $font-weight-medium;

      @include themify {
        color: themed('text-primary');
        
        &::placeholder {
          color: themed('text-tertiary');
        }
      }
    }
  }

  &__toolbar {
    padding: $spacing-16 $spacing-32;
    display: flex;
    align-items: center;
    justify-content: space-between;

    @include themify {
      background-color: themed('surface-card');
      border-bottom: 1px solid themed('border-subtle');
    }

    // Custom styles for filter buttons within toolbar
    @include themify {
      .btn--secondary {
        border-color: themed('border-subtle');
        background-color: themed('bg-primary');
        color: themed('text-primary');
        font-weight: $font-weight-medium;

        &:hover {
          background-color: themed('bg-hover');
        }
      }
    }
  }

  &__filter-group {
    display: flex;
    align-items: center;
    gap: $spacing-12;

    // Filters have subtle borders in Fluent 2
    .btn--secondary {
       border: 1px solid;
       @include themify {
         border-color: themed('border-subtle');
       }
    }
  }

  &__action-group {
    display: flex;
    align-items: center;
    gap: $spacing-8;

    // Secondary actions like Export or More Options should NOT have borders
    .btn {
      border: 0 !important;
    }
  }

  &__selection-bar {
    margin: $spacing-16 $spacing-32 0;
    padding: $spacing-12 $spacing-16;
    border-radius: $border-radius-xlarge;
    display: flex;
    align-items: center;
    justify-content: space-between;
    animation: fade-in $duration-normal ease-in-out;

    @include themify {
      background-color: alpha-color(themed('action-primary'), 0.05);
      border: 1px solid alpha-color(themed('action-primary'), 0.2);
    }
  }

  &__selection-actions {
    display: flex;
    align-items: center;
    gap: $spacing-16;
  }

  &__selection-buttons {
    display: flex;
    align-items: center;
    gap: $spacing-8;
  }

  &__grid-container {
    padding: $spacing-24 $spacing-32;
    flex: 1;
    overflow: auto;
    @include custom-scrollbar;
  }

  &__grid-card {
    border-radius: 0.75rem;
    overflow: hidden;
    @include elevation(2);

    @include themify {
      background-color: themed('surface-card');
      border: 1px solid themed('border-subtle');
    }
  }

  // Table Cell styles
  table {
    border-collapse: separate;
    border-spacing: 0;
  }

  thead {
    @include themify {
      background-color: themed('bg-secondary');
    }
    
    @include themify {
      th {
        @include text-style($font-size-200, $font-weight-bold);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        border-bottom: 1px solid themed('border-subtle');
        color: themed('text-secondary');
      }
    }
  }

  &__user-cell {
    display: flex;
    align-items: center;
    gap: $spacing-12;
  }
  
  &__user-info {
    display: flex;
    flex-direction: column;
  }
  
  &__user-name {
    @include text-style($font-size-300, $font-weight-semibold);
    @include themify {
      color: themed('text-primary');
    }
  }
  
  &__user-email {
    @include text-style($font-size-200);
    @include themify {
      color: themed('text-secondary');
    }
  }

  &__status {
    display: flex;
    align-items: center;
    gap: $spacing-8;
    @include text-style($font-size-300, $font-weight-medium);
    
    &--active {
      @include themify {
        color: themed('text-primary');
      }
      &::before {
        content: '';
        display: block;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        @include themify {
          background-color: themed('state-success');
        }
      }
    }
    
    &--inactive {
      @include themify {
        color: themed('text-disabled');
      }
      &::before {
        content: '';
        display: block;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        @include themify {
          background-color: themed('text-disabled');
        }
      }
    }
  }

  &__checkbox {
    width: 16px;
    height: 16px;
    border-radius: $border-radius-small;
    cursor: pointer;
    
    @include themify {
      border: 1px solid themed('border-default');
    }
    
    &:checked {
      @include themify {
        background-color: themed('action-primary');
        border-color: themed('action-primary');
      }
    }
    
    &:focus {
      outline: none;
      @include themify {
        border-color: themed('action-primary');
      }
    }
  }

  &__pagination {
    padding: $spacing-16 $spacing-24;
    display: flex;
    align-items: center;
    justify-content: space-between;

    @include themify {
      background-color: themed('surface-card');
      border-top: 1px solid themed('border-subtle');
    }
  }
  
  &__pagination-info {
    display: flex;
    align-items: center;
    gap: $spacing-16;
  }
  
  &__pagination-controls {
    display: flex;
    align-items: center;
    gap: $spacing-4;
  }

  &__rows-select {
    font-size: $font-size-300;
    border: none;
    background: transparent;
    font-weight: $font-weight-semibold;
    padding: 0;
    cursor: pointer;
    outline: none;

    @include themify {
      color: themed('text-primary');
    }
  }

  // Row selection and hover effects (matches fluent spec)
  .fluent-grid-selected {
    @include themify {
      background-color: alpha-color(themed('action-primary'), 0.08) !important;
    }
  }

  tr:hover {
    @include themify {
      background-color: alpha-color(themed('action-primary'), 0.04) !important;
    }
  }
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}