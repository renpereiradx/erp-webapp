// =============================================================================
// MAIN LAYOUT STYLES
// =============================================================================
// Layout principal con sidebar, navbar y contenido
// Dise√±ado con Fluent Design System
// =============================================================================

@use '../abstracts' as *;

// -----------------------------------------------------------------------------
// LAYOUT BASE
// -----------------------------------------------------------------------------

.layout {
  display: flex;
  min-height: 100vh;

  @include themify {
    background-color: themed('bg-primary');
  }
}

.layout__main {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 100vh;
  width: 100%;
  transition: margin-left 0.3s ease;

  &--with-sidebar {
    @include desktop {
      margin-left: 240px; // Sidebar width
      width: calc(100% - 240px);
    }
  }
}

.layout__content {
  flex: 1;
  padding: $spacing-20 $spacing-20;

  @include mobile {
    padding: $spacing-16 $spacing-12;
  }
}

// -----------------------------------------------------------------------------
// SIDEBAR
// -----------------------------------------------------------------------------

.sidebar {
  display: flex;
  flex-direction: column;
  width: 240px;
  height: 100vh;
  overflow-y: auto;

  @include themify {
    background-color: themed('surface-primary');
    border-right: 1px solid themed('border-subtle');
    box-shadow: themed('shadow-card');
  }

  &--desktop {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 30;

    @include mobile {
      display: none;
    }

    @include tablet {
      display: none;
    }
  }

  &--mobile {
    position: relative;
    z-index: 50;
  }
}

.sidebar__header {
  flex-shrink: 0;
  padding: $spacing-24;

  @include themify {
    border-bottom: 1px solid themed('border-subtle');
  }
}

.sidebar__logo {
  display: flex;
  align-items: center;
  gap: $spacing-12;
}

.sidebar__logo-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: $border-radius-medium;

  @include themify {
    background-color: themed('accent-primary');
    color: themed('accent-text');
  }
}

.sidebar__logo-icon-svg {
  width: 24px;
  height: 24px;
}

.sidebar__logo-text {
  font-size: $font-size-400;
  font-weight: $font-weight-semibold;
  margin: 0;

  @include themify {
    color: themed('text-primary');
  }
}

.sidebar__close {
  position: absolute;
  top: $spacing-16;
  right: -48px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  padding: 0;
  border: none;
  border-radius: $border-radius-medium;
  cursor: pointer;
  transition: background-color 0.2s ease;

  @include themify {
    background-color: rgba(0, 0, 0, 0.5);
    color: #ffffff;

    &:hover {
      background-color: rgba(0, 0, 0, 0.7);
    }
  }
}

.sidebar__close-icon {
  width: 24px;
  height: 24px;
}

.sidebar__nav {
  flex: 1;
  padding: $spacing-16;
  overflow-y: auto;
}

// -----------------------------------------------------------------------------
// SIDEBAR OVERLAY (Mobile)
// -----------------------------------------------------------------------------

.sidebar-overlay {
  position: fixed;
  inset: 0;
  z-index: 40;
  display: flex;

  @include desktop {
    display: none;
  }
}

.sidebar-overlay__backdrop {
  position: absolute;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.5);
}

// -----------------------------------------------------------------------------
// NAVIGATION
// -----------------------------------------------------------------------------

.nav__item-wrapper {
  margin-bottom: $spacing-8;
}

.nav__item {
  display: flex;
  align-items: center;
  width: 100%;
  padding: $spacing-12;
  font-size: $font-size-300;
  font-weight: $font-weight-medium;
  border: none;
  border-radius: $border-radius-medium;
  cursor: pointer;
  transition: all 0.2s ease;
  text-decoration: none;

  @include themify {
    background-color: transparent;
    color: themed('text-primary');

    &:hover {
      background-color: themed('surface-hover');
    }

    &--active {
      background-color: themed('accent-primary');
      color: themed('accent-text');
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
  }
}

.nav__icon {
  width: 16px;
  height: 16px;
  margin-right: $spacing-12;
  flex-shrink: 0;
}

.nav__text {
  flex: 1;
}

.nav__chevron {
  width: 16px;
  height: 16px;
  margin-left: auto;
  flex-shrink: 0;
}

.nav__submenu {
  margin-top: $spacing-8;
  margin-left: $spacing-24;
  display: flex;
  flex-direction: column;
  gap: $spacing-4;
}

.nav__subitem {
  display: flex;
  align-items: center;
  padding: $spacing-8 $spacing-12;
  font-size: $font-size-200;
  font-weight: $font-weight-medium;
  border-radius: $border-radius-small;
  cursor: pointer;
  transition: all 0.2s ease;
  text-decoration: none;

  @include themify {
    background-color: transparent;
    color: themed('text-secondary');

    &:hover {
      background-color: themed('surface-hover');
      color: themed('text-primary');
    }

    &--active {
      background-color: themed('accent-light');
      color: themed('accent-primary');
    }
  }
}

// -----------------------------------------------------------------------------
// NAVBAR
// -----------------------------------------------------------------------------

.navbar {
  position: sticky;
  top: 0;
  z-index: 20;
  display: flex;
  align-items: center;
  height: 64px;
  flex-shrink: 0;

  @include themify {
    background-color: themed('surface-primary');
    border-bottom: 1px solid themed('border-subtle');
    box-shadow: themed('shadow-sm');
  }
}

.navbar__menu-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 64px;
  padding: 0;
  border: none;
  border-radius: 0;
  cursor: pointer;
  transition: background-color 0.2s ease;

  @include themify {
    background-color: transparent;
    color: themed('text-primary');
    border-right: 1px solid themed('border-subtle');

    &:hover {
      background-color: themed('surface-hover');
    }
  }

  @include desktop {
    display: none;
  }
}

.navbar__menu-icon {
  width: 24px;
  height: 24px;
}

.navbar__content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex: 1;
  padding: 0 $spacing-16;
  gap: $spacing-16;
  overflow: hidden;
}

// -----------------------------------------------------------------------------
// EXCHANGE RATES
// -----------------------------------------------------------------------------

.navbar__rates {
  display: flex;
  align-items: center;
  gap: $spacing-12;
  overflow: hidden;
  flex: 1;
  max-width: 70%;

  @include desktop {
    max-width: 62%;
  }
}

.navbar__rates-label {
  font-size: $font-size-100;
  font-weight: $font-weight-semibold;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  flex-shrink: 0;

  @include themify {
    color: themed('text-tertiary');
  }
}

.navbar__rates-list {
  display: flex;
  align-items: center;
  gap: $spacing-8;
  overflow-x: auto;
  scrollbar-width: thin;

  &::-webkit-scrollbar {
    height: 4px;
  }

  &::-webkit-scrollbar-thumb {
    @include themify {
      background-color: themed('border-default');
      border-radius: $border-radius-small;
    }
  }
}

.navbar__rate {
  display: flex;
  align-items: center;
  gap: $spacing-4;
  padding: $spacing-4 $spacing-8;
  border-radius: $border-radius-large;
  white-space: nowrap;
  flex-shrink: 0;

  @include themify {
    background-color: themed('bg-secondary');
    border: 1px solid themed('border-subtle');
  }
}

.navbar__rate-icon {
  width: 16px;
  height: 16px;

  @include themify {
    color: themed('accent-primary');
  }
}

.navbar__rate-code {
  font-size: $font-size-100;
  font-weight: $font-weight-medium;

  @include themify {
    color: themed('text-primary');
  }
}

.navbar__rate-value {
  font-size: $font-size-100;
  font-family: monospace;

  @include themify {
    color: themed('text-secondary');
  }
}

.navbar__rate-base {
  font-size: 10px;
  text-transform: uppercase;

  @include themify {
    color: themed('text-tertiary');
  }
}

.navbar__rates-loader {
  width: 16px;
  height: 16px;
  animation: spin 1s linear infinite;

  @include themify {
    color: themed('accent-primary');
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.navbar__rates-error,
.navbar__rates-empty {
  font-size: $font-size-100;
  font-weight: $font-weight-medium;
  white-space: nowrap;

  @include themify {
    color: themed('text-tertiary');
  }
}

.navbar__rates-error {
  @include themify {
    color: themed('error-text');
  }
}

// -----------------------------------------------------------------------------
// NAVBAR ACTIONS
// -----------------------------------------------------------------------------

.navbar__actions {
  display: flex;
  align-items: center;
  gap: $spacing-12;
  margin-left: auto;
}

.navbar__settings-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: $spacing-8;
  min-width: 48px;
  min-height: 40px;
  height: 40px;
  padding: 0 $spacing-12;
  border: none;
  border-radius: $border-radius-medium;
  cursor: pointer;
  transition: background-color 0.2s ease;

  @include themify {
    background-color: transparent;
    color: themed('text-primary');

    &:hover {
      background-color: themed('surface-hover');
    }
  }
}

.navbar__settings-icon {
  width: 20px;
  height: 20px;
}

.navbar__settings-text {
  font-size: $font-size-300;
  font-weight: $font-weight-medium;

  @include mobile {
    display: none;
  }
}

// -----------------------------------------------------------------------------
// USER MENU
// -----------------------------------------------------------------------------

.user-menu {
  position: fixed;
  z-index: 1000;
  min-width: 16rem;
  min-height: 10rem;
  max-height: 80vh;
  border-radius: $border-radius-large;
  overflow: hidden;

  @include themify {
    background-color: themed('surface-primary');
    border: 1px solid themed('border-subtle');
    box-shadow: themed('shadow-lg');
  }
}

.user-menu__header {
  display: flex;
  align-items: center;
  gap: $spacing-12;
  padding: $spacing-16;

  @include themify {
    border-bottom: 1px solid themed('border-subtle');
  }
}

.user-menu__avatar {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: $border-radius-circular;
  flex-shrink: 0;

  @include themify {
    background-color: themed('accent-primary');
    color: themed('accent-text');
  }
}

.user-menu__avatar-icon {
  width: 24px;
  height: 24px;
}

.user-menu__info {
  flex: 1;
  min-width: 0;
}

.user-menu__name {
  font-size: $font-size-300;
  font-weight: $font-weight-semibold;
  margin: 0 0 $spacing-4 0;

  @include themify {
    color: themed('text-primary');
  }
}

.user-menu__email {
  font-size: $font-size-200;
  margin: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  @include themify {
    color: themed('text-secondary');
  }
}

.user-menu__body {
  padding: $spacing-8;
}

.user-menu__item {
  display: flex;
  align-items: center;
  width: 100%;
  padding: $spacing-12 $spacing-16;
  font-size: $font-size-300;
  font-weight: $font-weight-medium;
  border: none;
  border-radius: $border-radius-medium;
  cursor: pointer;
  transition: all 0.2s ease;
  text-decoration: none;

  @include themify {
    background-color: transparent;
    color: themed('text-primary');

    &:hover {
      background-color: themed('surface-hover');
    }

    &--danger {
      color: themed('error-text');

      &:hover {
        background-color: themed('error-bg');
        color: themed('error-text');
      }
    }
  }
}

.user-menu__item-icon {
  width: 16px;
  height: 16px;
  margin-right: $spacing-12;
}

.user-menu-overlay {
  position: fixed;
  inset: 0;
  z-index: 999;
}
