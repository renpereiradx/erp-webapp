<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Validation Test - Final Badge Fix</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Simular todas las variables de la app */
    :root {
      --background: #ffffff;
      --foreground: #000000;
      --destructive: #ef4444;
      --destructive-foreground: #ffffff;
      --accent: #84cc16;
      --accent-foreground: #000000;
      --border: #000000;
      --brutalist-red: #ef4444;
      --brutalist-green: #10b981;
      --brutalist-yellow: #eab308;
    }

    [data-theme='neo-brutalism-light'] {
      --background: #ffffff;
      --foreground: #000000;
      --destructive: #ef4444;
      --destructive-foreground: #ffffff;
      --accent: #84cc16;
      --accent-foreground: #000000;
      --border: #000000;
      --brutalist-red: #ef4444;
      --brutalist-green: #10b981;
      --brutalist-yellow: #eab308;
    }

    .test-container {
      margin: 20px 0;
      padding: 20px;
      border: 2px solid #ccc;
      background: #f9f9f9;
    }

    .success { border-color: green; background: #e8f5e8; }
    .warning { border-color: orange; background: #fff5e6; }
    .error { border-color: red; background: #ffe6e6; }
  </style>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="bg-gray-100 p-8" data-theme="neo-brutalism-light">
  <h1 class="text-3xl font-bold mb-8">üîç Final Badge Validation Test</h1>

  <!-- Test 1: Notification Badge con var(--brutalist-red) -->
  <div class="test-container">
    <h2 class="text-xl font-bold mb-4">‚úÖ Test 1: Notification Badge (Neo-Brutalism Red)</h2>
    <div class="relative inline-block">
      <button class="p-3 bg-gray-200 border-2 border-black rounded">
        <i data-lucide="bell" class="w-6 h-6"></i>
      </button>
      <!-- Usando las correcciones aplicadas -->
      <span class="absolute -top-2 -right-2 px-2 py-1 text-xs font-black border-2 border-black min-w-0 flex items-center justify-center"
            style="
              background-color: var(--brutalist-red);
              color: #000000;
              box-shadow: 1px 1px 0px 0px rgba(0,0,0,1);
              white-space: nowrap;
              overflow: visible;
              min-width: 20px;
              height: 20px;
              display: flex;
              visibility: visible;
              opacity: 1;
            ">
        3
      </span>
    </div>
    <p class="mt-2 text-sm">‚úÖ Badge deber√≠a ser visible con fondo rojo (#ef4444) y texto negro</p>
  </div>

  <!-- Test 2: Profile Badge con var(--brutalist-green) -->
  <div class="test-container">
    <h2 class="text-xl font-bold mb-4">‚úÖ Test 2: Profile Badge (Neo-Brutalism Green)</h2>
    <div class="relative inline-block">
      <button class="p-3 bg-gray-200 border-2 border-black rounded">
        <i data-lucide="user" class="w-6 h-6"></i>
      </button>
      <span class="absolute -top-2 -right-2 px-2 py-1 text-xs font-black border-2 border-black min-w-0 flex items-center justify-center"
            style="
              background-color: var(--brutalist-green);
              color: #000000;
              box-shadow: 1px 1px 0px 0px rgba(0,0,0,1);
              white-space: nowrap;
              overflow: visible;
              min-width: 20px;
              height: 20px;
              display: flex;
              visibility: visible;
              opacity: 1;
            ">
        1
      </span>
    </div>
    <p class="mt-2 text-sm">‚úÖ Badge deber√≠a ser visible con fondo verde (#10b981) y texto negro</p>
  </div>

  <!-- Test 3: Compare with old method (bg-red-400 class) -->
  <div class="test-container warning">
    <h2 class="text-xl font-bold mb-4">‚ö†Ô∏è Test 3: Comparaci√≥n con m√©todo anterior (Tailwind classes)</h2>
    <div class="relative inline-block mr-8">
      <button class="p-3 bg-gray-200 border-2 border-black rounded">
        <i data-lucide="bell" class="w-6 h-6"></i>
      </button>
      <!-- M√©todo anterior con clases de Tailwind -->
      <span class="absolute -top-2 -right-2 px-2 py-1 text-xs font-black border-2 border-black bg-red-400 min-w-0 flex items-center justify-center"
            style="
              box-shadow: 1px 1px 0px 0px rgba(0,0,0,1);
              white-space: nowrap;
              overflow: visible;
              min-width: 20px;
              height: 20px;
            ">
        OLD
      </span>
    </div>
    <div class="relative inline-block">
      <button class="p-3 bg-gray-200 border-2 border-black rounded">
        <i data-lucide="bell" class="w-6 h-6"></i>
      </button>
      <!-- M√©todo nuevo con variables CSS -->
      <span class="absolute -top-2 -right-2 px-2 py-1 text-xs font-black border-2 border-black min-w-0 flex items-center justify-center"
            style="
              background-color: var(--brutalist-red);
              color: #000000;
              box-shadow: 1px 1px 0px 0px rgba(0,0,0,1);
              white-space: nowrap;
              overflow: visible;
              min-width: 20px;
              height: 20px;
              display: flex;
              visibility: visible;
              opacity: 1;
            ">
        NEW
      </span>
    </div>
    <p class="mt-2 text-sm">‚ö†Ô∏è Comparar ambos badges - el nuevo deber√≠a ser m√°s consistente con el sistema de temas</p>
  </div>

  <!-- Test 4: Sidebar Badge Test -->
  <div class="test-container">
    <h2 class="text-xl font-bold mb-4">‚úÖ Test 4: Sidebar Nav Badge (var(--brutalist-lime))</h2>
    <div class="bg-white p-4 border-2 border-black">
      <div class="flex items-center text-black font-bold">
        <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
        <span class="flex-1">DASHBOARD</span>
        <span class="ml-2 px-2 py-1 text-xs font-black border-2 border-black flex items-center justify-center"
              style="
                background-color: var(--brutalist-lime, #84cc16);
                color: #000000;
                box-shadow: 1px 1px 0px 0px rgba(0,0,0,1);
                display: flex;
                align-items: center;
                justify-content: center;
                min-width: 20px;
                height: 20px;
              ">
          1
        </span>
      </div>
    </div>
    <p class="mt-2 text-sm">‚úÖ Badge del sidebar deber√≠a usar la variable --brutalist-lime</p>
  </div>

  <!-- Test 5: All visual properties diagnostic -->
  <div class="test-container">
    <h2 class="text-xl font-bold mb-4">üî¨ Test 5: CSS Properties Diagnostic</h2>
    <div id="diagnostic-results"></div>
  </div>

  <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // Diagnostic script
    setTimeout(() => {
      const diagnosticDiv = document.getElementById('diagnostic-results');
      
      // Test cada badge
      const badges = document.querySelectorAll('span[style*="var(--brutalist"]');
      let diagnosticHTML = '<h3 class="font-bold mb-4">üîç Badge Properties Analysis:</h3>';
      
      badges.forEach((badge, index) => {
        const computedStyle = window.getComputedStyle(badge);
        const rect = badge.getBoundingClientRect();
        
        // Determinar si el badge es visible
        const isVisible = computedStyle.display !== 'none' && 
                         computedStyle.visibility !== 'hidden' && 
                         computedStyle.opacity !== '0' &&
                         rect.width > 0 && rect.height > 0;
        
        const statusClass = isVisible ? 'success' : 'error';
        const statusEmoji = isVisible ? '‚úÖ' : '‚ùå';
        
        diagnosticHTML += `
          <div class="p-3 mb-2 border-2 ${statusClass === 'success' ? 'border-green-500 bg-green-100' : 'border-red-500 bg-red-100'}">
            <strong>${statusEmoji} Badge ${index + 1} - ${isVisible ? 'VISIBLE' : 'NOT VISIBLE'}</strong><br>
            <div class="grid grid-cols-2 gap-2 text-sm mt-2">
              <div>Display: <code>${computedStyle.display}</code></div>
              <div>Visibility: <code>${computedStyle.visibility}</code></div>
              <div>Opacity: <code>${computedStyle.opacity}</code></div>
              <div>Position: <code>${computedStyle.position}</code></div>
              <div>Background: <code>${computedStyle.backgroundColor}</code></div>
              <div>Color: <code>${computedStyle.color}</code></div>
              <div>Width: <code>${rect.width}px</code></div>
              <div>Height: <code>${rect.height}px</code></div>
              <div>Z-Index: <code>${computedStyle.zIndex}</code></div>
              <div>Overflow: <code>${computedStyle.overflow}</code></div>
            </div>
          </div>
        `;
      });
      
      // Test variables CSS
      const root = document.documentElement;
      const rootStyle = getComputedStyle(root);
      
      diagnosticHTML += '<h3 class="font-bold mt-6 mb-4">üé® CSS Variables Check:</h3>';
      diagnosticHTML += '<div class="grid grid-cols-1 gap-2 text-sm">';
      
      const variables = ['--brutalist-red', '--brutalist-green', '--brutalist-lime', '--brutalist-yellow'];
      variables.forEach(varName => {
        const value = rootStyle.getPropertyValue(varName);
        const hasValue = value && value.trim() !== '';
        diagnosticHTML += `
          <div class="p-2 border ${hasValue ? 'border-green-500 bg-green-100' : 'border-red-500 bg-red-100'}">
            ${hasValue ? '‚úÖ' : '‚ùå'} <code>${varName}</code>: <code>${hasValue ? value : 'NOT DEFINED'}</code>
          </div>
        `;
      });
      
      diagnosticHTML += '</div>';
      diagnosticDiv.innerHTML = diagnosticHTML;
    }, 100);
  </script>
</body>
</html>
